# MVP矩阵运算





## MVP矩阵的概念与意义

MVP分别是Model（模型），View（视图，观察），Projection（投影）三种矩阵。

作用：

* 将3D物体转化到2D平面

* 为各个空间（模型空间，世界空间等）的应用做准备



## 不同坐标的概念

顶点坐标起始于局部空间（Local Space），称为局部坐标（Local Coordinate），在经过矩阵变换后会变成世界坐标（World Coordinate），观察坐标（View Coordinate），裁剪坐标（Clip Coordinate），最后以屏幕坐标（Screen Coordinate）的形式结束

![img](https://docimg10.docs.qq.com/image/NEFr3PJwOrh10ecVGoxdjg?w=894&h=447)



### Model模型变换

#### 意义

将模型从自身所属的模型空间中提取出来，通过矩阵变换放置在世界空间中。

* 模型空间是以自身中心为原点的空间坐标系

* 世界空间是以世界中心为原点的空间坐标系

这一步使得模型拥有了世界空间中的位置信息，我们能够知道它在世界空间中坐标位置

![image-20211026140601937](../assets/image-20211026140601937.png)

<center>左图为3ds MAX中的模型空间，右图为unity中的世界空间</center>



* 注：3ds MAX采用右手坐标系，x轴代表左右，y轴代表前后，z轴代表上下
* 而unity采用左手坐标系，x轴代表左右，y轴上下，z轴代表前后
* DirectX，unity采用左手坐标系，3ds MAX，OpenGL采用右手坐标系



#### 如何实现

1.缩放

2.旋转

3.平移

对应矩阵从右向左，顺序不能发生变换，否则结果会发生偏移（先旋转后平移与先平移后旋转结果是不同的）

![img](https://docimg2.docs.qq.com/image/0uP_FCp7j4T3cEnB_DT2mg?w=509&h=163)

<center>Translation <- Rotation <- Scale</center>



### View视图变换

#### 意义

将模型从世界空间转换到以摄像机为中心的视觉空间坐标系中，由客观的三维世界转换到模拟人眼的视觉空间中

![img](https://docimg3.docs.qq.com/image/CxB5wHf4a5vsFUcwNbTjuw?w=1257&h=547)

<center>视锥</center>

#### 关于摄像机

为了模拟人眼，我们需要知道三个参数：

* 位置
* 观察方向
* 正负（将手机的摄像头旋转180°，得到的图像自然也发生旋转）

为此，我们引入了摄像机这个概念



#### 如何实现

